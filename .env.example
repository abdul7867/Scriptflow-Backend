# ============================================
# SCRIPTFLOW BACKEND CONFIGURATION
# ============================================
# SECURITY NOTES:
# - Never commit .env files to version control
# - Use strong, randomly generated keys in production
# - ADMIN_API_KEY is REQUIRED in production (NODE_ENV=production)
# ============================================

# Server Configuration
PORT=3000
NODE_ENV=development

# MongoDB Atlas Connection String
# Get this from: https://cloud.mongodb.com/ (Free Tier)
# Format: mongodb+srv://<username>:<password>@<cluster>.mongodb.net/<database>?retryWrites=true&w=majority
# SECURITY: Use a dedicated database user with limited permissions
MONGODB_URI=mongodb+srv://your_username:your_password@cluster0.xxxxx.mongodb.net/scriptflow?retryWrites=true&w=majority

# Redis Connection String
# Get this from: https://upstash.com/ (Free Tier)
# Format: rediss://:<password>@<host>:<port>
# SECURITY: Use TLS connection (rediss://) in production
REDIS_URL=rediss://default:your_password@your-endpoint.upstash.io:6379

# Queue Configuration
QUEUE_CONCURRENCY=5

# Rate Limiting
# IP-based: requests per 15 minutes
RATE_LIMIT_MAX=100
# User-based: requests per hour per subscriber_id
USER_RATE_LIMIT=10
# Max active beta users (others on waitlist)
MAX_BETA_USERS=100

# Google Vertex AI (replaces Gemini API Key)
# Get service account from: https://console.cloud.google.com/
# REQUIRED: GCP_PROJECT_ID and service account JSON
# SECURITY: Never commit gcp-service-account.json to version control
GCP_PROJECT_ID=your-gcp-project-id
GCP_LOCATION=us-central1
# For local dev: path to service account JSON
# For Docker: this is mounted as a volume
GOOGLE_APPLICATION_CREDENTIALS=./gcp-service-account.json

# ManyChat API Key
# Get this from: ManyChat Settings > API
MANYCHAT_API_KEY=your_manychat_api_key
MANYCHAT_SCRIPT_FIELD_ID=your_script_image_field_id
MANYCHAT_COPY_FIELD_ID=your_copy_link_field_id
MANYCHAT_ENABLE_DIRECT_MESSAGING=false

# ImgBB API Key (for image hosting)
# Get this from: https://api.imgbb.com/
IMGBB_API_KEY=your_imgbb_api_key



# ============================================
# SECURITY: REQUIRED IN PRODUCTION
# ============================================
# Admin API Key (for protected endpoints like /api/v1/dataset/export)
# REQUIRED when NODE_ENV=production
# Generate with: openssl rand -hex 32
ADMIN_API_KEY=

# ============================================
# AWS CONFIGURATION (For S3 & Deployment)
# ============================================
AWS_REGION=ap-south-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
S3_BUCKET_NAME=
IMAGE_PROVIDER=imgbb # switch to 's3' when ready

# Analysis Mode: audio | frames | hybrid
ANALYSIS_MODE=hybrid

# ============================================
# PUBLIC URLS
# ============================================
# Base URL for public script links (used for copy-friendly URLs)
# In production, set this to your Render/Railway/etc URL
# Example: https://scriptflow-backend.onrender.com
BASE_URL=

# ============================================
# INSTAGRAM AUTHENTICATION (Optional)
# ============================================
# Path to Instagram cookies file for authenticated downloads
# Export cookies from browser using "Get cookies.txt LOCALLY" extension
# SECURITY: Never commit cookies file to version control
INSTAGRAM_COOKIES_PATH=./instagram_cookies.txt
